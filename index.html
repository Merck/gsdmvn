<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Group sequential design with non-constant effect • gsdmvn</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Group sequential design with non-constant effect">
<meta property="og:description" content="Basic group sequential design computations extended.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">gsdmvn</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/DesignWithAverageHazardRatio.html">Design Using Average Hazard Ratio</a>
    </li>
    <li>
      <a href="articles/DesignWithSpending.html">Trial design with spending under NPH</a>
    </li>
    <li>
      <a href="articles/NPEbackground.html">Non-Proportional Effect Size in Group Sequential Design</a>
    </li>
    <li>
      <a href="articles/NPEbounds.html">Computing Bounds Under Non-Constant Treatment Effect</a>
    </li>
    <li>
      <a href="articles/PowerEvaluationWithSpending.html">Power Evaluation with Spending bounds</a>
    </li>
    <li>
      <a href="articles/QuickStart.html">Quick Start for NPH Sample Size and Power</a>
    </li>
    <li>
      <a href="articles/SpendingTimeExamples.html">Spending Time Examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Merck/gsdmvn/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="gsdmvn" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#gsdmvn" class="anchor"></a>gsdmvn</h1></div>
<!-- badges: start -->

<p>The goal of <strong>gsdmvn</strong> is to enable fixed or group sequential design under non-proportional hazards. Piecewise constant enrollment, failure rates and dropout rates for a stratified population are available to enable highly flexible enrollment, time-to-event and time-to-dropout assumptions. Substantial flexibility on top of what is in the gsDesign package is intended for selecting boundaries. While this work is in progress, substantial capabilities have been enabled. Comments on usability and features are encouraged as this is a development version of the package.</p>
<p>The goal of gsdmvn is to enable group sequential trial design for time-to-event endpoints under non-proportional hazards assumptions. The package is still maturing; as the package functions become more stable, they will likely be included in the <a href="https://github.com/Merck/gsDesign2">gsDesign2</a> package.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install <code>gsdmvn</code> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"Merck/gsdmvn"</span><span class="op">)</span></code></pre></div>
</div>
<div id="specifying-enrollment-and-failure-rates" class="section level2">
<h2 class="hasAnchor">
<a href="#specifying-enrollment-and-failure-rates" class="anchor"></a>Specifying enrollment and failure rates</h2>
<p>This is a basic example which shows you how to solve a common problem. We assume there is a 4 month delay in treatment effect. Specifically, we assume a hazard ratio of 1 for 4 months and 0.6 thereafter. For this example we assume an exponential failure rate and low exponential dropout rate. The <code>enrollRates</code> specification indicates an expected enrollment duration of 12 months with exponential inter-arrival times.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsdmvn/">gsdmvn</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">gsDesign</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://merck.github.io/gsDesign2/">gsDesign2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span>

<span class="co">## basic example code</span>

<span class="co">## Constant enrollment over 12 months</span>
<span class="co">## rate will be adjusted later by gsDesignNPH to get sample size</span>
<span class="va">enrollRates</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>Stratum <span class="op">=</span> <span class="st">"All"</span>, duration <span class="op">=</span> <span class="fl">12</span>, rate <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>

<span class="co">## 12 month median exponential failure rate in control</span>
<span class="co">## 4 month delay in effect with HR=0.6 after</span>
<span class="co">## Low exponential dropout rate</span>
<span class="va">medianSurv</span> <span class="op">&lt;-</span> <span class="fl">12</span>
<span class="va">failRates</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  Stratum <span class="op">=</span> <span class="st">"All"</span>,
  duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="cn">Inf</span><span class="op">)</span>,
  failRate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="va">medianSurv</span>,
  hr <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.6</span><span class="op">)</span>,
  dropoutRate <span class="op">=</span> <span class="fl">.001</span>
<span class="op">)</span></code></pre></div>
<p>The resulting failure rate specification is the following table. As many rows and strata as needed can be specified to approximate whatever patterns you wish.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">failRates</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Stratum</th>
<th align="right">duration</th>
<th align="right">failRate</th>
<th align="right">hr</th>
<th align="right">dropoutRate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">All</td>
<td align="right">4</td>
<td align="right">0.0577623</td>
<td align="right">1.0</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">All</td>
<td align="right">Inf</td>
<td align="right">0.0577623</td>
<td align="right">0.6</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<p>Computing a fixed sample size design with 2.5% one-sided Type I error and 90% power. We specify a trial duration of 36 months with <code>analysisTimes</code>. Since there is a single analysis, we specify an upper p-value bound of 0.025 with <code>upar = qnorm(0.975)</code>. There is no lower bound which is specified with <code>lpar = -Inf</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span> <span class="op">&lt;-</span>
  <span class="fu"><a href="reference/gs_design_ahr.html">gs_design_ahr</a></span><span class="op">(</span><span class="va">enrollRates</span>, <span class="va">failRates</span>, upar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">qnorm</a></span><span class="op">(</span><span class="fl">.975</span><span class="op">)</span>, lpar <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, IF <span class="op">=</span> <span class="fl">1</span>, analysisTimes <span class="op">=</span> <span class="fl">36</span><span class="op">)</span></code></pre></div>
<p>The input enrollment rates are scaled to achieve power:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span><span class="op">$</span><span class="va">enrollRates</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Stratum</th>
<th align="right">duration</th>
<th align="right">rate</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">All</td>
<td align="right">12</td>
<td align="right">35.05288</td>
</tr></tbody>
</table>
<p>The failure and dropout rates remain unchanged from what was input:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span><span class="op">$</span><span class="va">failRates</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">Stratum</th>
<th align="right">duration</th>
<th align="right">failRate</th>
<th align="right">hr</th>
<th align="right">dropoutRate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">All</td>
<td align="right">4</td>
<td align="right">0.0577623</td>
<td align="right">1.0</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">All</td>
<td align="right">Inf</td>
<td align="right">0.0577623</td>
<td align="right">0.6</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<p>Finally, the expected analysis time is in <code>Time</code>, sample size <code>N</code>, events required <code>Events</code> and bound <code>Z</code> are in <code>design$bounds</code>. Note that <code>AHR</code> is the average hazard ratio used to calculate the targeted event counts. The natural parameter (<code><a href="https://rdrr.io/r/base/Log.html">log(AHR)</a></code>) is in theta and corresponding statistical information under the alternate hypothesis are in <code>info</code> and under the null hypothesis in <code>info0</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span><span class="op">$</span><span class="va">bounds</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Analysis</th>
<th align="left">Bound</th>
<th align="right">Time</th>
<th align="right">N</th>
<th align="right">Events</th>
<th align="right">Z</th>
<th align="right">Probability</th>
<th align="right">AHR</th>
<th align="right">theta</th>
<th align="right">info</th>
<th align="right">info0</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">1</td>
<td align="left">Upper</td>
<td align="right">36</td>
<td align="right">420.6346</td>
<td align="right">311.0028</td>
<td align="right">1.959964</td>
<td align="right">0.9</td>
<td align="right">0.6917244</td>
<td align="right">0.3685676</td>
<td align="right">76.74383</td>
<td align="right">77.75069</td>
</tr></tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/Merck/gsdmvn/">https://​github.com/​Merck/​gsdmvn/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/Merck/gsdmvn/issues">https://​github.com/​Merck/​gsdmvn/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Keaven Anderson <br><small class="roles"> Author, maintainer </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Merck/gsdmvn/actions"><img src="https://github.com/Merck/gsdmvn/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/Merck/gsdmvn?branch=master"><img src="https://codecov.io/gh/Merck/gsdmvn/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Keaven Anderson. Site built with pkgdown 1.6.1.
  </p>
  <p>Copyright © Merck Sharp &amp; Dohme Corp., a subsidiary of Merck &amp; Co., Inc., Kenilworth, NJ, USA.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
